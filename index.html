<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="BentoBox Ordering System - Build your perfect bento box with fresh ingredients"
    />
    <title>BentoBox Ordering System</title>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&family=Poppins:wght@600;700&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body {
        background-color: hsl(0, 0%, 98%);
        color: hsl(210, 10%, 15%);
      }

      .gradient-1 {
        background: linear-gradient(
          135deg,
          hsl(13, 75%, 57%),
          hsl(100, 45%, 45%)
        );
      }

      .gradient-2 {
        background: linear-gradient(
          135deg,
          hsl(13, 75%, 67%),
          hsl(40, 90%, 50%)
        );
      }

      .transition-smooth {
        transition: all 200ms ease-in;
      }

      .focus-visible:focus {
        outline: 2px solid hsl(100, 45%, 45%);
        outline-offset: 2px;
      }

      .sidebar-collapsed {
        width: 80px;
      }

      .sidebar-expanded {
        width: 280px;
      }

      @media (max-width: 768px) {
        .sidebar-mobile-hidden {
          transform: translateX(-100%);
        }
        .sidebar-mobile-visible {
          transform: translateX(0);
        }
      }

      .toast {
        animation: slideIn 200ms ease-in;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .card-hover:hover {
        transform: translateY(-4px);
      }

      .dragging {
        opacity: 0.5;
      }
    </style>
    <link rel="stylesheet" href="globals.css" />
  </head>
  <body class="font-sans bg-neutral text-neutral-foreground">
    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Mobile Overlay -->
    <div
      id="mobile-overlay"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 z-30 hidden md:hidden"
    ></div>

    <!-- Sidebar Navigation -->
    <aside
      id="sidebar"
      class="fixed left-0 top-0 h-full bg-gray-50 border-r border-gray-200 z-40 sidebar-expanded transition-smooth sidebar-mobile-hidden md:sidebar-mobile-visible"
    >
      <div class="flex flex-col h-full">
        <!-- Logo & App Name -->
        <div class="p-6 border-b border-gray-200">
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 rounded-lg bg-primary flex items-center justify-center"
            >
              <span
                class="text-primary-foreground font-display font-bold text-xl"
                >B</span
              >
            </div>
            <span
              class="font-display font-bold text-xl text-gray-900 sidebar-text"
              >BentoBox</span
            >
          </div>
        </div>

        <!-- Navigation Links -->
        <nav class="flex-1 p-4 space-y-2">
          <a
            href="#menu"
            class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible"
            data-section="menu"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">Browse Menu</span>
          </a>
          <a
            href="#builder"
            class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible"
            data-section="builder"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">Bento Builder</span>
          </a>
          <a
            href="#orders"
            class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible"
            data-section="orders"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">My Orders</span>
          </a>
          <a
            href="#admin"
            class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible"
            data-section="admin"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
              ></path>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">Admin Panel</span>
          </a>
        </nav>

        <!-- Bottom Actions -->
        <div class="p-4 border-t border-gray-200 space-y-2">
          <a
            href="#profile"
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">Profile</span>
          </a>
          <button
            class="flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-smooth focus-visible w-full"
          >
            <svg
              class="w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
              ></path>
            </svg>
            <span class="sidebar-text font-normal">Logout</span>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="md:ml-[280px] min-h-screen">
      <!-- Top Bar -->
      <header
        class="sticky top-0 z-20 bg-gray-50 border-b border-gray-200 px-8 py-4"
      >
        <div class="flex items-center justify-between gap-4">
          <!-- Mobile Menu Toggle -->
          <button
            id="mobile-menu-toggle"
            class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-smooth focus-visible text-gray-700"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              ></path>
            </svg>
          </button>

          <!-- Section Title -->
          <h1
            id="section-title"
            class="font-display font-bold text-2xl text-gray-900"
          >
            Browse Menu
          </h1>

          <!-- Search Bar -->
          <div class="hidden sm:flex flex-1 max-w-md">
            <input
              id="search-input"
              type="search"
              placeholder="Search menu items..."
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
            />
          </div>

          <!-- Right Actions -->
          <div class="flex items-center gap-4">
            <button
              id="notification-btn"
              class="relative p-2 rounded-lg hover:bg-gray-100 transition-smooth focus-visible text-gray-700"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                ></path>
              </svg>
              <span
                id="notification-badge"
                class="absolute top-1 right-1 w-2 h-2 bg-primary rounded-full"
              ></span>
            </button>
            <div
              class="w-10 h-10 rounded-full bg-gradient-1 flex items-center justify-center cursor-pointer"
            >
              <span class="text-primary-foreground font-semibold">JD</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Menu Dashboard Section -->
      <section id="menu" class="p-8">
        <!-- Category Filter Bar -->
        <div class="mb-8 overflow-x-auto">
          <div class="flex gap-3 pb-2">
            <button
              class="category-filter px-6 py-2 rounded-lg bg-primary text-primary-foreground font-normal whitespace-nowrap transition-smooth focus-visible"
              data-category="all"
            >
              All Items
            </button>
            <button
              class="category-filter px-6 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal whitespace-nowrap hover:bg-gray-200 transition-smooth focus-visible"
              data-category="sushi"
            >
              Sushi
            </button>
            <button
              class="category-filter px-6 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal whitespace-nowrap hover:bg-gray-200 transition-smooth focus-visible"
              data-category="rice"
            >
              Rice
            </button>
            <button
              class="category-filter px-6 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal whitespace-nowrap hover:bg-gray-200 transition-smooth focus-visible"
              data-category="protein"
            >
              Protein
            </button>
            <button
              class="category-filter px-6 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal whitespace-nowrap hover:bg-gray-200 transition-smooth focus-visible"
              data-category="vegetables"
            >
              Vegetables
            </button>
            <button
              class="category-filter px-6 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal whitespace-nowrap hover:bg-gray-200 transition-smooth focus-visible"
              data-category="drinks"
            >
              Drinks
            </button>
          </div>
        </div>

        <!-- Menu Grid -->
        <div
          id="menu-grid"
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
        >
          <!-- Menu items will be dynamically generated here -->
        </div>
      </section>

      <!-- Bento Builder Section -->
      <section id="builder" class="p-8 hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- Left Panel: Bento Layout -->
          <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h2 class="font-display font-bold text-2xl text-gray-900 mb-6">
              Your Bento Box
            </h2>
            <div class="grid grid-cols-2 gap-4 mb-6" id="bento-slots">
              <div
                class="bento-slot border-2 border-dashed border-gray-300 rounded-lg p-6 min-h-32 flex items-center justify-center text-gray-400 transition-smooth"
                data-slot="1"
              >
                <span>Slot 1</span>
              </div>
              <div
                class="bento-slot border-2 border-dashed border-gray-300 rounded-lg p-6 min-h-32 flex items-center justify-center text-gray-400 transition-smooth"
                data-slot="2"
              >
                <span>Slot 2</span>
              </div>
              <div
                class="bento-slot border-2 border-dashed border-gray-300 rounded-lg p-6 min-h-32 flex items-center justify-center text-gray-400 transition-smooth"
                data-slot="3"
              >
                <span>Slot 3</span>
              </div>
              <div
                class="bento-slot border-2 border-dashed border-gray-300 rounded-lg p-6 min-h-32 flex items-center justify-center text-gray-400 transition-smooth"
                data-slot="4"
              >
                <span>Slot 4</span>
              </div>
            </div>
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                <span class="text-gray-700 font-semibold">Total:</span>
                <span id="bento-total" class="text-2xl font-bold text-gray-900"
                  >â‚±0.00</span
                >
              </div>
              <button
                id="checkout-btn"
                class="w-full px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
              >
                Proceed to Checkout
              </button>
            </div>
          </div>

          <!-- Right Panel: Available Items -->
          <div class="bg-white rounded-lg border border-gray-200 p-6">
            <h2 class="font-display font-bold text-2xl text-gray-900 mb-6">
              Available Items
            </h2>
            <div class="space-y-3" id="builder-items">
              <!-- Builder items will be dynamically populated from cart -->
            </div>
          </div>
        </div>
      </section>

      <!-- My Orders Section (Customer View) -->
      <section id="orders" class="p-8 hidden">
        <div class="flex items-center justify-between mb-8">
          <h2 class="font-display font-bold text-3xl text-gray-900">
            <span id="orders-title">My Orders</span>
          </h2>
          <div id="order-filters" class="hidden flex gap-2">
            <button class="order-filter-btn px-4 py-2 rounded-lg bg-primary text-primary-foreground font-normal" data-status="all">All</button>
            <button class="order-filter-btn px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal" data-status="pending">Pending</button>
            <button class="order-filter-btn px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal" data-status="preparing">Preparing</button>
            <button class="order-filter-btn px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-normal" data-status="delivered">Delivered</button>
          </div>
        </div>
        <div id="orders-container" class="space-y-4">
          <!-- Orders will be dynamically rendered here -->
        </div>
      </section>

      <!-- Admin Panel Section -->
      <section id="admin" class="p-8 hidden">
        <!-- Tab Navigation -->
        <div class="mb-8">
          <div class="flex gap-4 border-b border-gray-200">
            <button class="admin-tab px-6 py-3 font-semibold text-primary border-b-2 border-primary" data-tab="menu">
              Menu Management
            </button>
            <button class="admin-tab px-6 py-3 font-semibold text-gray-600 hover:text-gray-900" data-tab="users">
              User Management
            </button>
          </div>
        </div>

        <!-- Menu Management Tab -->
        <div id="admin-menu-tab" class="admin-tab-content">
          <div class="flex items-center justify-between mb-8">
            <h2 class="font-display font-bold text-3xl text-gray-900">
              Menu Items
            </h2>
            <button
              id="add-item-btn"
              class="px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
            >
              Add New Item
            </button>
          </div>

          <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-50 border-b border-gray-200">
                  <tr>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Item Name</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Category</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Price</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Stock</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Visible</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Actions</th>
                  </tr>
                </thead>
                <tbody id="menu-items-table" class="divide-y divide-gray-200">
                  <!-- Menu items will be dynamically rendered -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- User Management Tab -->
        <div id="admin-users-tab" class="admin-tab-content hidden">
          <div class="flex items-center justify-between mb-8">
            <h2 class="font-display font-bold text-3xl text-gray-900">
              User Accounts
            </h2>
            <button
              id="add-user-btn"
              class="px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
            >
              Add New User
            </button>
          </div>

          <div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-50 border-b border-gray-200">
                  <tr>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Name</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Email</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Role</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Status</th>
                    <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Actions</th>
                  </tr>
                </thead>
                <tbody id="users-table" class="divide-y divide-gray-200">
                  <!-- Users will be dynamically rendered -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Floating Cart Summary -->
    <div
      id="mini-cart"
      class="fixed bottom-8 right-8 bg-white rounded-lg border-2 border-primary p-4 cursor-pointer hover:scale-105 transition-smooth z-30"
    >
      <div class="flex items-center gap-3">
        <div class="relative">
          <svg
            class="w-8 h-8 text-primary"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"
            ></path>
          </svg>
          <span
            id="cart-count"
            class="absolute -top-2 -right-2 bg-primary text-primary-foreground text-xs font-semibold w-5 h-5 rounded-full flex items-center justify-center"
            >0</span
          >
        </div>
        <div>
          <p class="text-sm text-gray-600 font-normal">Cart Total</p>
          <p id="cart-total" class="font-bold text-lg text-gray-900">$0.00</p>
        </div>
      </div>
    </div>

    <!-- Cart Modal -->
    <div
      id="cart-modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
        <div class="flex items-center justify-between p-6 border-b border-gray-200">
          <h3 class="font-display font-bold text-2xl text-gray-900">
            Shopping Cart
          </h3>
          <button
            id="close-cart-modal"
            class="text-gray-400 hover:text-gray-600 transition-smooth"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>
        
        <div id="cart-items-container" class="flex-1 overflow-y-auto p-6">
          <!-- Cart items will be dynamically populated here -->
        </div>

        <div class="border-t border-gray-200 p-6 bg-gray-50">
          <div class="flex justify-between items-center mb-4">
            <span class="text-lg font-semibold text-gray-900">Total:</span>
            <span id="cart-modal-total" class="text-2xl font-bold text-gray-900">â‚±0.00</span>
          </div>
          <div class="flex gap-3">
            <button
              id="clear-cart-btn"
              class="flex-1 px-6 py-3 rounded-lg bg-gray-200 text-gray-900 font-normal hover:bg-gray-300 transition-smooth focus-visible"
            >
              Clear Cart
            </button>
            <button
              id="proceed-checkout-btn"
              class="flex-1 px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
            >
              Proceed to Checkout
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Item Modal -->
    <div
      id="add-item-modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-lg max-w-md w-full p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="font-display font-bold text-2xl text-gray-900">
            Add New Item
          </h3>
          <button
            id="close-modal"
            class="text-gray-400 hover:text-gray-600 transition-smooth"
          >
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>
        </div>
        <form id="add-item-form" class="space-y-4">
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Item Name</label>
            <input
              id="item-name"
              type="text"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
              placeholder="Enter item name"
            />
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Category</label>
            <select
              id="item-category"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
            >
              <option value="sushi">Sushi</option>
              <option value="rice">Rice</option>
              <option value="protein">Protein</option>
              <option value="vegetables">Vegetables</option>
              <option value="drinks">Drinks</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Price</label>
            <input
              id="item-price"
              type="number"
              step="0.01"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
              placeholder="0.00"
            />
          </div>
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Description</label>
            <textarea
              id="item-description"
              rows="3"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
              placeholder="Enter description"
            ></textarea>
          </div>
          <div class="flex gap-3 pt-4">
            <button
              type="button"
              id="cancel-modal"
              class="flex-1 px-6 py-3 rounded-lg bg-gray-200 text-gray-900 font-normal hover:bg-gray-300 transition-smooth focus-visible"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="flex-1 px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
            >
              Add Item
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Payment Modal -->
    <div
      id="payment-modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden flex items-center justify-center p-4"
    >
      <div class="bg-white rounded-lg max-w-md w-full p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="font-display font-bold text-2xl text-gray-900">
            Payment Details
          </h3>
          <button
            id="close-payment-modal"
            class="text-gray-400 hover:text-gray-600 transition-smooth"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <form id="payment-form" class="space-y-4">
          <div>
            <label class="block text-sm font-semibold text-gray-900 mb-2">Payment Method</label>
            <select
              id="payment-method"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
            >
              <option value="Credit Card">Credit Card</option>
              <option value="PayPal">PayPal</option>
              <option value="Cash on Delivery">Cash on Delivery</option>
            </select>
          </div>
          <div id="card-details">
            <div class="mb-4">
              <label class="block text-sm font-semibold text-gray-900 mb-2">Card Number</label>
              <input
                type="text"
                placeholder="1234 5678 9012 3456"
                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
              />
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-semibold text-gray-900 mb-2">Expiry</label>
                <input
                  type="text"
                  placeholder="MM/YY"
                  class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
                />
              </div>
              <div>
                <label class="block text-sm font-semibold text-gray-900 mb-2">CVV</label>
                <input
                  type="text"
                  placeholder="123"
                  class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-tertiary text-gray-900 bg-white"
                />
              </div>
            </div>
          </div>
          <div class="border-t border-gray-200 pt-4 mt-4">
            <div class="flex justify-between items-center mb-4">
              <span class="text-lg font-semibold text-gray-900">Total Amount:</span>
              <span id="payment-total" class="text-2xl font-bold text-gray-900">$0.00</span>
            </div>
          </div>
          <div class="flex gap-3 pt-4">
            <button
              type="button"
              id="cancel-payment"
              class="flex-1 px-6 py-3 rounded-lg bg-gray-200 text-gray-900 font-normal hover:bg-gray-300 transition-smooth focus-visible"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="flex-1 px-6 py-3 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
            >
              Complete Payment
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // ============================================
      // MENU DATA CONFIGURATION
      // ============================================
      // Easy to modify: Just change the image URL, name, price, description, icon, or category
      // Image URL format: Use GitHub raw URL format like:
      // 'https://raw.githubusercontent.com/username/repo/refs/heads/main/image.jpg'
      // PRICES ARE IN PHILIPPINE PESO (â‚±)
      
      const menuItems = [
        // SUSHI ITEMS
        { 
          name: 'Salmon Nigiri', 
          category: 'sushi', 
          price: 450, 
          description: 'Fresh salmon over seasoned rice', 
          icon: 'ðŸ£',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/salmon-nigiri.jpg',
          alt: 'salmon nigiri.png'
        },
        { 
          name: 'Tuna Nigiri', 
          category: 'sushi', 
          price: 500, 
          description: 'Premium tuna over seasoned rice', 
          icon: 'ðŸ£',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/tuna-nigiri.jpg',
          alt: 'Tuna Nigiri'
        },
        { 
          name: 'Eel Nigiri', 
          category: 'sushi', 
          price: 550, 
          description: 'Grilled eel with sweet sauce', 
          icon: 'ðŸ£',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/eel-nigiri.jpg',
          alt: 'Eel Nigiri'
        },
        { 
          name: 'California Roll', 
          category: 'sushi', 
          price: 500, 
          description: 'Crab, avocado, and cucumber', 
          icon: 'ðŸ±',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/california-roll.jpg',
          alt: 'California Roll'
        },
        { 
          name: 'Spicy Tuna Roll', 
          category: 'sushi', 
          price: 600, 
          description: 'Spicy tuna with cucumber', 
          icon: 'ðŸŒ¶ï¸',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/spicy-tuna-roll.jpg',
          alt: 'Spicy Tuna Roll'
        },
        { 
          name: 'Dragon Roll', 
          category: 'sushi', 
          price: 750, 
          description: 'Eel and avocado specialty roll', 
          icon: 'ðŸ‰',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/dragon-roll.jpg',
          alt: 'Dragon Roll'
        },
        
        // RICE ITEMS
        { 
          name: 'Steamed Rice', 
          category: 'rice', 
          price: 125, 
          description: 'Perfectly cooked white rice', 
          icon: 'ðŸš',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/steamed-rice.jpg',
          alt: 'Steamed Rice'
        },
        { 
          name: 'Fried Rice', 
          category: 'rice', 
          price: 300, 
          description: 'Vegetable fried rice', 
          icon: 'ðŸ›',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/fried-rice.jpg',
          alt: 'Fried Rice'
        },
        { 
          name: 'Brown Rice', 
          category: 'rice', 
          price: 175, 
          description: 'Healthy brown rice', 
          icon: 'ðŸŒ¾',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/brown-rice.jpg',
          alt: 'Brown Rice'
        },
        { 
          name: 'Sushi Rice', 
          category: 'rice', 
          price: 200, 
          description: 'Seasoned sushi rice', 
          icon: 'ðŸš',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/sushi-rice.jpg',
          alt: 'Sushi Rice'
        },
        
        // PROTEIN ITEMS
        { 
          name: 'Teriyaki Chicken', 
          category: 'protein', 
          price: 650, 
          description: 'Grilled chicken with teriyaki glaze', 
          icon: 'ðŸ—',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/teriyaki-chicken.jpg',
          alt: 'Teriyaki Chicken'
        },
        { 
          name: 'Tempura Shrimp', 
          category: 'protein', 
          price: 600, 
          description: 'Crispy battered shrimp', 
          icon: 'ðŸ¤',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/tempura-shrimp.jpg',
          alt: 'Tempura Shrimp'
        },
        { 
          name: 'Grilled Salmon', 
          category: 'protein', 
          price: 750, 
          description: 'Fresh grilled salmon fillet', 
          icon: 'ðŸŸ',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/grilled-salmon.jpg',
          alt: 'Grilled Salmon'
        },
        { 
          name: 'Beef Teriyaki', 
          category: 'protein', 
          price: 800, 
          description: 'Tender beef with teriyaki sauce', 
          icon: 'ðŸ¥©',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/beef-teriyaki.jpg',
          alt: 'Beef Teriyaki'
        },
        { 
          name: 'Tofu Steak', 
          category: 'protein', 
          price: 500, 
          description: 'Grilled tofu with soy glaze', 
          icon: 'ðŸ§ˆ',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/tofu-steak.jpg',
          alt: 'Tofu Steak'
        },
        { 
          name: 'Chicken Katsu', 
          category: 'protein', 
          price: 700, 
          description: 'Breaded chicken cutlet', 
          icon: 'ðŸ–',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/chicken-katsu.jpg',
          alt: 'Chicken Katsu'
        },
        
        // VEGETABLE ITEMS
        { 
          name: 'Edamame', 
          category: 'vegetables', 
          price: 250, 
          description: 'Steamed soybeans with sea salt', 
          icon: 'ðŸ«˜',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/edamame.jpg',
          alt: 'Edamame'
        },
        { 
          name: 'Seaweed Salad', 
          category: 'vegetables', 
          price: 300, 
          description: 'Fresh seaweed with sesame', 
          icon: 'ðŸ¥—',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/seaweed-salad.jpg',
          alt: 'Seaweed Salad'
        },
        { 
          name: 'Cucumber Salad', 
          category: 'vegetables', 
          price: 225, 
          description: 'Crisp cucumber with vinegar', 
          icon: 'ðŸ¥’',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/cucumber-salad.jpg',
          alt: 'Cucumber Salad'
        },
        { 
          name: 'Mixed Vegetables', 
          category: 'vegetables', 
          price: 350, 
          description: 'Stir-fried seasonal vegetables', 
          icon: 'ðŸ¥¦',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/mixed-vegetables.jpg',
          alt: 'Mixed Vegetables'
        },
        { 
          name: 'Pickled Radish', 
          category: 'vegetables', 
          price: 200, 
          description: 'Traditional pickled daikon', 
          icon: 'ðŸ¥•',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/pickled-radish.jpg',
          alt: 'Pickled Radish'
        },
        
        // DRINK ITEMS
        { 
          name: 'Green Tea', 
          category: 'drinks', 
          price: 150, 
          description: 'Hot or iced Japanese green tea', 
          icon: 'ðŸµ',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/green-tea.jpg',
          alt: 'Green Tea'
        },
        { 
          name: 'Miso Soup', 
          category: 'drinks', 
          price: 200, 
          description: 'Traditional Japanese soup', 
          icon: 'ðŸœ',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/miso-soup.jpg',
          alt: 'Miso Soup'
        },
        { 
          name: 'Ramune Soda', 
          category: 'drinks', 
          price: 175, 
          description: 'Japanese marble soda', 
          icon: 'ðŸ¥¤',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/ramune-soda.jpg',
          alt: 'Ramune Soda'
        },
        { 
          name: 'Sake', 
          category: 'drinks', 
          price: 450, 
          description: 'Premium Japanese rice wine', 
          icon: 'ðŸ¶',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/sake.jpg',
          alt: 'Sake'
        },
        { 
          name: 'Iced Tea', 
          category: 'drinks', 
          price: 125, 
          description: 'Refreshing iced tea', 
          icon: 'ðŸ§‹',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/iced-tea.jpg',
          alt: 'Iced Tea'
        },
        { 
          name: 'Sparkling Water', 
          category: 'drinks', 
          price: 150, 
          description: 'Carbonated mineral water', 
          icon: 'ðŸ’§',
          image: 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/sparkling-water.jpg',
          alt: 'Sparkling Water'
        }
      ];

      // ============================================
      // DEFAULT IMAGE FALLBACK
      // ============================================
      // This image will be used if an item doesn't have an image specified
      const DEFAULT_ITEM_IMAGE = 'https://raw.githubusercontent.com/anashi-who/for-you/refs/heads/main/default-food.jpg';

      // State management
      let cart = [];
      let bentoSlots = [null, null, null, null];
      let bentoExtras = [];
      let bentoBoxStyle = 'traditional';
      let currentSection = 'menu';
      let currentCategory = 'all';
      let currentUser = { role: 'customer', name: 'John Doe' }; // Roles: customer, staff, admin
      let orders = [
        { 
          id: 1234, 
          items: [
            { name: 'Salmon Nigiri', quantity: 2, price: 8.99 },
            { name: 'Teriyaki Chicken', quantity: 1, price: 12.99 },
            { name: 'Edamame', quantity: 1, price: 4.99 },
            { name: 'Green Tea', quantity: 1, price: 2.99 }
          ],
          total: 45.95,
          status: 'delivered',
          date: 'March 15, 2024',
          customer: 'John Doe',
          paymentMethod: 'Credit Card'
        },
        { 
          id: 1235, 
          items: [
            { name: 'California Roll', quantity: 3, price: 9.99 },
            { name: 'Tempura Shrimp', quantity: 2, price: 11.99 },
            { name: 'Miso Soup', quantity: 2, price: 3.99 }
          ],
          total: 53.95,
          status: 'preparing',
          date: 'March 18, 2024',
          customer: 'John Doe',
          paymentMethod: 'PayPal'
        },
        { 
          id: 1236, 
          items: [
            { name: 'Dragon Roll', quantity: 2, price: 14.99 },
            { name: 'Grilled Salmon', quantity: 1, price: 14.99 }
          ],
          total: 44.97,
          status: 'pending',
          date: 'March 19, 2024',
          customer: 'Jane Smith',
          paymentMethod: 'Credit Card'
        }
      ];
      let notifications = [
        { id: 1, message: 'Your order #1235 is being prepared', read: false },
        { id: 2, message: 'New menu items available!', read: false },
        { id: 3, message: 'Special discount on sushi today', read: false }
      ];
      let users = [
        { id: 1, name: 'John Doe', email: 'john@example.com', role: 'customer', status: 'active' },
        { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'customer', status: 'active' },
        { id: 3, name: 'Mike Johnson', email: 'mike@example.com', role: 'staff', status: 'active' },
        { id: 4, name: 'Sarah Williams', email: 'sarah@example.com', role: 'admin', status: 'active' }
      ];


      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        loadCartFromStorage();
        renderMenuItems();
        updateCartDisplay();
        setupNavigation();
        setupCategoryFilters();
        setupBentoBuilder();
        setupBentoCustomization();
        setupMobileMenu();
        setupAdminModal();
        setupCheckout();
        setupSearch();
        setupNotifications();
        updateNotificationBadge();
        renderOrders();
        setupOrderFilters();
        renderAdminTables();
        setupAdminTabs();
        setupPaymentModal();
      });


      // Navigation
      function setupNavigation() {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = ['menu', 'builder', 'orders', 'admin'];

        navLinks.forEach((link) => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetSection = link.dataset.section;

            // Hide all sections
            sections.forEach((section) => {
              document.getElementById(section).classList.add('hidden');
            });

            // Show target section
            document.getElementById(targetSection).classList.remove('hidden');

            // Update active nav
            navLinks.forEach((l) => {
              l.classList.remove('bg-primary', 'text-primary-foreground');
              l.classList.add('text-gray-700');
            });
            link.classList.add('bg-primary', 'text-primary-foreground');
            link.classList.remove('text-gray-700');

            // Update section title
            const titles = {
              menu: 'Browse Menu',
              builder: 'Bento Builder',
              orders: 'My Orders',
              admin: 'Admin Panel',
            };
            document.getElementById('section-title').textContent =
              titles[targetSection];

            currentSection = targetSection;

            // Close mobile menu
            closeMobileMenu();
          });
        });
      }

      // Render Menu Items
      function renderMenuItems(category = 'all', searchTerm = '') {
        const menuGrid = document.getElementById('menu-grid');
        menuGrid.innerHTML = '';

        const filteredItems = menuItems.filter(item => {
          const matchesCategory = category === 'all' || item.category === category;
          const matchesSearch = item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               item.description.toLowerCase().includes(searchTerm.toLowerCase());
          return matchesCategory && matchesSearch;
        });

        if (filteredItems.length === 0) {
          menuGrid.innerHTML = '<p class="col-span-full text-center text-gray-600 py-8">No items found</p>';
          return;
        }

        filteredItems.forEach(item => {
          const card = document.createElement('article');
          card.className = 'bg-white rounded-lg border border-gray-200 overflow-hidden transition-smooth card-hover cursor-pointer';
          card.innerHTML = `
            <img
              src="${item.image || DEFAULT_ITEM_IMAGE}"
              alt="${item.alt || item.name}"
              class="w-full h-48 object-cover"
            />
            <div class="p-5">
              <h3 class="font-display font-semibold text-lg text-gray-900 mb-2">
                ${item.name}
              </h3>
              <p class="text-gray-600 text-sm mb-4">
                ${item.description}
              </p>
              <div class="flex items-center justify-between">
                <span class="font-semibold text-xl text-gray-900">â‚±${item.price.toFixed(2)}</span>
                <button
                  class="add-to-bento px-4 py-2 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth focus-visible"
                  data-item="${item.name}"
                  data-price="${item.price}"
                >
                  Add to Cart
                </button>
              </div>
            </div>
          `;
          menuGrid.appendChild(card);
        });

        setupAddToBento();
      }

      // Category Filters
      function setupCategoryFilters() {
        const filters = document.querySelectorAll('.category-filter');
        filters.forEach((filter) => {
          filter.addEventListener('click', () => {
            currentCategory = filter.dataset.category;
            
            filters.forEach((f) => {
              f.classList.remove('bg-primary', 'text-primary-foreground');
              f.classList.add('bg-gray-100', 'text-gray-700');
            });
            filter.classList.add('bg-primary', 'text-primary-foreground');
            filter.classList.remove('bg-gray-100', 'text-gray-700');

            const searchTerm = document.getElementById('search-input').value;
            renderMenuItems(currentCategory, searchTerm);
          });
        });
      }

      // Search Functionality
      function setupSearch() {
        const searchInput = document.getElementById('search-input');
        searchInput.addEventListener('input', (e) => {
          const searchTerm = e.target.value;
          renderMenuItems(currentCategory, searchTerm);
        });
      }

      // Add to Bento
      function setupAddToBento() {
        const addButtons = document.querySelectorAll('.add-to-bento');
        addButtons.forEach((button) => {
          button.addEventListener('click', (e) => {
            e.stopPropagation();
            const item = button.dataset.item;
            const price = parseFloat(button.dataset.price);

            cart.push({ item, price });
            saveCartToStorage();
            updateCartDisplay();
            showToast(`${item} added to cart!`);
          });
        });
      }

      // Notifications
      function setupNotifications() {
        const notificationBtn = document.getElementById('notification-btn');
        notificationBtn.addEventListener('click', () => {
          showNotificationPanel();
        });
      }

      function showNotificationPanel() {
        const unreadCount = notifications.filter(n => !n.read).length;
        const notificationList = notifications.map(n => 
          `<div class="p-4 border-b border-gray-200 ${n.read ? 'bg-gray-50' : 'bg-white'}">
            <p class="text-gray-900">${n.message}</p>
          </div>`
        ).join('');

        const panel = document.createElement('div');
        panel.className = 'fixed top-20 right-8 bg-white rounded-lg border-2 border-gray-200 w-80 max-h-96 overflow-y-auto z-50';
        panel.innerHTML = `
          <div class="p-4 border-b border-gray-200 flex justify-between items-center">
            <h3 class="font-display font-bold text-lg text-gray-900">Notifications</h3>
            <button id="close-notifications" class="text-gray-400 hover:text-gray-600">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          ${notificationList}
          <div class="p-4">
            <button id="mark-all-read" class="w-full px-4 py-2 rounded-lg bg-primary text-primary-foreground font-normal hover:bg-[hsl(13,75%,52%)] transition-smooth">
              Mark All as Read
            </button>
          </div>
        `;

        document.body.appendChild(panel);

        document.getElementById('close-notifications').addEventListener('click', () => {
          panel.remove();
        });

        document.getElementById('mark-all-read').addEventListener('click', () => {
          notifications.forEach(n => n.read = true);
          updateNotificationBadge();
          panel.remove();
          showToast('All notifications marked as read');
        });

        document.addEventListener('click', (e) => {
          if (!panel.contains(e.target) && e.target.id !== 'notification-btn') {
            panel.remove();
          }
        }, { once: true });
      }

      function updateNotificationBadge() {
        const badge = document.getElementById('notification-badge');
        const unreadCount = notifications.filter(n => !n.read).length;
        badge.style.display = unreadCount > 0 ? 'block' : 'none';
      }

      // Bento Builder
      function setupBentoBuilder() {
        updateBuilderItems();
        
        const slots = document.querySelectorAll('.bento-slot');

        slots.forEach((slot, index) => {
          slot.addEventListener('dragover', (e) => {
            e.preventDefault();
            slot.classList.add('border-primary');
          });

          slot.addEventListener('dragleave', () => {
            slot.classList.remove('border-primary');
          });

          slot.addEventListener('drop', (e) => {
            e.preventDefault();
            slot.classList.remove('border-primary');

            const item = e.dataTransfer.getData('item');
            const price = parseFloat(e.dataTransfer.getData('price'));

            bentoSlots[index] = { item, price };
            updateBentoDisplay();
            showToast(`${item} added to slot ${index + 1}!`);
          });

          slot.addEventListener('click', () => {
            if (bentoSlots[index]) {
              bentoSlots[index] = null;
              updateBentoDisplay();
              showToast('Item removed from slot!');
            }
          });
        });
      }

      function updateBuilderItems() {
        const builderItemsContainer = document.getElementById('builder-items');
        builderItemsContainer.innerHTML = '';

        if (cart.length === 0) {
          builderItemsContainer.innerHTML = '<p class="text-center text-gray-600 py-8">Your cart is empty. Add items from the menu!</p>';
          return;
        }

        const uniqueItems = {};
        cart.forEach(cartItem => {
          if (!uniqueItems[cartItem.item]) {
            uniqueItems[cartItem.item] = { ...cartItem, count: 1 };
          } else {
            uniqueItems[cartItem.item].count++;
          }
        });

        Object.values(uniqueItems).forEach(item => {
          const menuItem = menuItems.find(m => m.name === item.item);
          const icon = menuItem ? menuItem.icon : 'ðŸ±';

          const itemDiv = document.createElement('div');
          itemDiv.className = 'builder-item flex items-center justify-between p-4 border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-smooth';
          itemDiv.draggable = true;
          itemDiv.dataset.item = item.item;
          itemDiv.dataset.price = item.price;
          
          itemDiv.innerHTML = `
            <div class="flex items-center gap-3 flex-1">
              <span class="text-3xl">${icon}</span>
              <div>
                <h4 class="font-semibold text-gray-900">${item.item}</h4>
                <p class="text-sm text-gray-600">â‚±${item.price.toFixed(2)} ${item.count > 1 ? `(x${item.count} in cart)` : ''}</p>
              </div>
            </div>
            <button
              class="add-to-slot px-4 py-2 rounded-lg bg-secondary text-secondary-foreground font-normal hover:bg-[hsl(13,75%,62%)] transition-smooth focus-visible"
            >
              Add
            </button>
          `;

          itemDiv.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('item', item.item);
            e.dataTransfer.setData('price', item.price);
            itemDiv.classList.add('dragging');
          });

          itemDiv.addEventListener('dragend', () => {
            itemDiv.classList.remove('dragging');
          });

          itemDiv.querySelector('.add-to-slot').addEventListener('click', () => {
            const emptySlotIndex = bentoSlots.findIndex(slot => slot === null);
            if (emptySlotIndex !== -1) {
              bentoSlots[emptySlotIndex] = { item: item.item, price: item.price };
              updateBentoDisplay();
              showToast(`${item.item} added to slot ${emptySlotIndex + 1}!`);
            } else {
              showToast('All slots are full!');
            }
          });

          builderItemsContainer.appendChild(itemDiv);
        });
      }

      function updateBentoDisplay() {
        const slots = document.querySelectorAll('.bento-slot');
        let total = 0;

        slots.forEach((slot, index) => {
          if (bentoSlots[index]) {
            const { item, price } = bentoSlots[index];
            const menuItem = menuItems.find(m => m.name === item);
            const icon = menuItem ? menuItem.icon : 'ðŸ±';
            
            slot.innerHTML = `
              <div class="text-center">
                <div class="text-3xl mb-2">${icon}</div>
                <p class="font-semibold text-gray-900 text-sm mb-1">${item}</p>
                <p class="text-xs text-gray-600">â‚±${price.toFixed(2)}</p>
              </div>
            `;
            slot.classList.remove('border-dashed', 'text-gray-400');
            slot.classList.add(
              'border-solid',
              'border-tertiary',
              'bg-gray-50',
              'cursor-pointer',
            );
            total += price;
          } else {
            slot.innerHTML = '<span>Slot ' + (index + 1) + '</span>';
            slot.classList.add('border-dashed', 'text-gray-400');
            slot.classList.remove(
              'border-solid',
              'border-tertiary',
              'bg-gray-50',
              'cursor-pointer',
            );
          }
        });

        const bentoTotalElement = document.getElementById('bento-total');
        if (bentoTotalElement) {
          bentoTotalElement.textContent = '$' + total.toFixed(2);
        }
      }

      // Bento Customization
      function setupBentoCustomization() {
        // Check if elements exist before setting up
        const boxStyleButtons = document.querySelectorAll('.box-style-btn');
        const quickAddButtons = document.querySelectorAll('.quick-add-btn');
        const extraCheckboxes = document.querySelectorAll('.extra-checkbox');

        // Box Style Selection
        if (boxStyleButtons.length > 0) {
          boxStyleButtons.forEach(btn => {
            btn.addEventListener('click', () => {
              boxStyleButtons.forEach(b => {
                b.classList.remove('border-primary', 'bg-primary', 'bg-opacity-10');
                b.classList.add('border-gray-300');
              });
              btn.classList.add('border-primary', 'bg-primary', 'bg-opacity-10');
              btn.classList.remove('border-gray-300');
              
              bentoBoxStyle = btn.dataset.style;
              const styleNames = {
                traditional: 'Traditional Style',
                modern: 'Modern Style',
                eco: 'Eco-Friendly Style',
                premium: 'Premium Style'
              };
              const displayElement = document.getElementById('box-style-display');
              if (displayElement) {
                displayElement.textContent = styleNames[bentoBoxStyle];
              }
              showToast(`${styleNames[bentoBoxStyle]} selected!`);
            });
          });
        }

        // Quick Add Categories
        if (quickAddButtons.length > 0) {
          quickAddButtons.forEach(btn => {
            btn.addEventListener('click', () => {
              const category = btn.dataset.category;
              const categoryItems = menuItems.filter(item => item.category === category);
              
              if (categoryItems.length === 0) {
                showToast('No items in this category');
                return;
              }

              // Add first available item from category to first empty slot
              const emptySlotIndex = bentoSlots.findIndex(slot => slot === null);
              if (emptySlotIndex !== -1) {
                const randomItem = categoryItems[Math.floor(Math.random() * categoryItems.length)];
                bentoSlots[emptySlotIndex] = { item: randomItem.name, price: randomItem.price };
                updateBentoDisplay();
                showToast(`${randomItem.name} added to slot ${emptySlotIndex + 1}!`);
              } else {
                showToast('All slots are full! Remove an item first.');
              }
            });
          });
        }

        // Extras Checkboxes
        if (extraCheckboxes.length > 0) {
          extraCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
              const extraName = e.target.dataset.extra;
              const extraPrice = parseFloat(e.target.dataset.price);
              
              if (e.target.checked) {
                bentoExtras.push({ 
                  name: extraName.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '), 
                  price: extraPrice 
                });
                showToast(`${extraName.split('-').join(' ')} added!`);
              } else {
                bentoExtras = bentoExtras.filter(extra => 
                  extra.name.toLowerCase().replace(' ', '-') !== extraName
                );
              }
              updateBentoDisplay();
            });
          });
        }
      }

      // Checkout
      function setupCheckout() {
        document
          .getElementById('checkout-btn')
          .addEventListener('click', () => {
            const hasItems = bentoSlots.some((slot) => slot !== null);
            if (hasItems) {
              // Add bento items to cart
              bentoSlots.forEach(slot => {
                if (slot) {
                  cart.push({ item: slot.item, price: slot.price });
                }
              });
              
              // Add extras to cart
              bentoExtras.forEach(extra => {
                if (extra.price > 0) {
                  cart.push({ item: extra.name, price: extra.price });
                }
              });

              saveCartToStorage();
              updateCartDisplay();
              
              showToast('Bento box added to cart!');
              
              // Clear bento builder
              bentoSlots = [null, null, null, null];
              bentoExtras = [];
              const extraCheckboxes = document.querySelectorAll('.extra-checkbox');
              if (extraCheckboxes.length > 0) {
                extraCheckboxes.forEach(cb => cb.checked = false);
              }
              const specialInstructions = document.getElementById('special-instructions');
              if (specialInstructions) {
                specialInstructions.value = '';
              }
              updateBentoDisplay();
              
              // Open cart modal
              setTimeout(() => {
                openCartModal();
              }, 500);
            } else {
              showToast('Please add items to your bento box!');
            }
          });

        // Mini cart click - open cart modal
        document.getElementById('mini-cart').addEventListener('click', () => {
          if (cart.length === 0) {
            showToast('Your cart is empty! Add items from the menu.');
            return;
          }
          openCartModal();
        });

        // Close cart modal
        document.getElementById('close-cart-modal').addEventListener('click', () => {
          closeCartModal();
        });

        // Clear cart
        document.getElementById('clear-cart-btn').addEventListener('click', () => {
          if (cart.length === 0) {
            showToast('Cart is already empty!');
            return;
          }
          if (confirm('Are you sure you want to clear your cart?')) {
            cart = [];
            bentoSlots = [null, null, null, null];
            bentoExtras = [];
            saveCartToStorage();
            updateCartDisplay();
            updateBentoDisplay();
            renderCartItems();
            
            // Show empty cart message immediately
            setTimeout(() => {
              showToast('Your cart is empty');
            }, 100);
          }
        });

        // Proceed to checkout from modal - Open payment modal
        document.getElementById('proceed-checkout-btn').addEventListener('click', () => {
          if (cart.length === 0) {
            showToast('Your cart is empty!');
            return;
          }
          
          closeCartModal();
          openPaymentModal();
        });

        // Close modal when clicking outside
        document.getElementById('cart-modal').addEventListener('click', (e) => {
          if (e.target.id === 'cart-modal') {
            closeCartModal();
          }
        });
      }

      function openCartModal() {
        if (cart.length === 0) {
          showToast('Your cart is empty! Browse the menu to add items.');
          return;
        }
        document.getElementById('cart-modal').classList.remove('hidden');
        renderCartItems();
      }

      function closeCartModal() {
        document.getElementById('cart-modal').classList.add('hidden');
      }

      function renderCartItems() {
        const container = document.getElementById('cart-items-container');
        const modalTotal = document.getElementById('cart-modal-total');
        
        if (cart.length === 0) {
          container.innerHTML = `
            <div class="text-center py-12">
              <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
              </svg>
              <p class="text-gray-600 text-lg">Your cart is empty</p>
              <p class="text-gray-500 text-sm mt-2">Add items from the menu to get started!</p>
            </div>
          `;
          modalTotal.textContent = 'â‚±0.00';
          return;
        }

        // Group items by name
        const groupedItems = {};
        cart.forEach((item, index) => {
          if (!groupedItems[item.item]) {
            groupedItems[item.item] = {
              name: item.item,
              price: item.price,
              quantity: 1,
              indices: [index]
            };
          } else {
            groupedItems[item.item].quantity++;
            groupedItems[item.item].indices.push(index);
          }
        });

        const total = cart.reduce((sum, item) => sum + item.price, 0);
        modalTotal.textContent = '$' + total.toFixed(2);

        container.innerHTML = Object.values(groupedItems).map(item => `
          <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg mb-3 hover:bg-gray-50 transition-smooth">
            <div class="flex-1">
              <h4 class="font-semibold text-gray-900">${item.name}</h4>
              <p class="text-sm text-gray-600">$${item.price.toFixed(2)} each</p>
            </div>
            <div class="flex items-center gap-4">
              <div class="flex items-center gap-2">
                <button 
                  class="decrease-qty w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-smooth"
                  data-item="${item.name}"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
                  </svg>
                </button>
                <span class="font-semibold text-gray-900 w-8 text-center">${item.quantity}</span>
                <button 
                  class="increase-qty w-8 h-8 rounded-lg bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-smooth"
                  data-item="${item.name}"
                  data-price="${item.price}"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                  </svg>
                </button>
              </div>
              <span class="font-bold text-gray-900 w-20 text-right">$${(item.price * item.quantity).toFixed(2)}</span>
              <button 
                class="remove-item text-primary hover:text-[hsl(13,75%,52%)] transition-smooth"
                data-item="${item.name}"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </div>
        `).join('');

        // Setup event listeners for cart actions
        setupCartItemActions();
      }

      function setupCartItemActions() {
        // Remove item
        document.querySelectorAll('.remove-item').forEach(btn => {
          btn.addEventListener('click', () => {
            const itemName = btn.dataset.item;
            cart = cart.filter(item => item.item !== itemName);
            saveCartToStorage();
            updateCartDisplay();
            renderCartItems();
            showToast(`${itemName} removed from cart`);
          });
        });

        // Decrease quantity
        document.querySelectorAll('.decrease-qty').forEach(btn => {
          btn.addEventListener('click', () => {
            const itemName = btn.dataset.item;
            const index = cart.findIndex(item => item.item === itemName);
            if (index !== -1) {
              cart.splice(index, 1);
              saveCartToStorage();
              updateCartDisplay();
              renderCartItems();
            }
          });
        });

        // Increase quantity
        document.querySelectorAll('.increase-qty').forEach(btn => {
          btn.addEventListener('click', () => {
            const itemName = btn.dataset.item;
            const price = parseFloat(btn.dataset.price);
            cart.push({ item: itemName, price: price });
            saveCartToStorage();
            updateCartDisplay();
            renderCartItems();
          });
        });
      }

      // Cart Management
      function updateCartDisplay() {
        const count = cart.length;
        const total = cart.reduce((sum, item) => sum + item.price, 0);

        document.getElementById('cart-count').textContent = count;
        document.getElementById('cart-total').textContent = '$' + total.toFixed(2);
        
        updateBuilderItems();
      }

      function saveCartToStorage() {
        localStorage.setItem('bentoCart', JSON.stringify(cart));
      }

      function loadCartFromStorage() {
        const stored = localStorage.getItem('bentoCart');
        if (stored) {
          cart = JSON.parse(stored);
        }
      }

      // Mobile Menu
      function setupMobileMenu() {
        const toggle = document.getElementById('mobile-menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobile-overlay');

        toggle.addEventListener('click', () => {
          sidebar.classList.toggle('sidebar-mobile-hidden');
          sidebar.classList.toggle('sidebar-mobile-visible');
          overlay.classList.toggle('hidden');
        });

        overlay.addEventListener('click', closeMobileMenu);
      }

      function closeMobileMenu() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobile-overlay');
        sidebar.classList.add('sidebar-mobile-hidden');
        sidebar.classList.remove('sidebar-mobile-visible');
        overlay.classList.add('hidden');
      }

      // Admin Modal
      function setupAdminModal() {
        const modal = document.getElementById('add-item-modal');
        const openBtn = document.getElementById('add-item-btn');
        const closeBtn = document.getElementById('close-modal');
        const cancelBtn = document.getElementById('cancel-modal');
        const form = document.getElementById('add-item-form');

        openBtn.addEventListener('click', () => {
          modal.classList.remove('hidden');
        });

        closeBtn.addEventListener('click', () => {
          modal.classList.add('hidden');
          form.reset();
        });

        cancelBtn.addEventListener('click', () => {
          modal.classList.add('hidden');
          form.reset();
        });

        form.addEventListener('submit', (e) => {
          e.preventDefault();
          
          const newItem = {
            name: document.getElementById('item-name').value,
            category: document.getElementById('item-category').value,
            price: parseFloat(document.getElementById('item-price').value),
            description: document.getElementById('item-description').value
          };

          menuItems.push(newItem);
          renderMenuItems(currentCategory);
          renderMenuItemsTable();
          showToast(`${newItem.name} added to menu!`);
          
          modal.classList.add('hidden');
          form.reset();
        });

        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            modal.classList.add('hidden');
            form.reset();
          }
        });
      }

      // Toast Notifications
      function showToast(message) {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className =
          'toast bg-white border border-gray-200 rounded-lg px-6 py-4 text-gray-900 font-normal';
        toast.textContent = message;

        container.appendChild(toast);

        setTimeout(() => {
          toast.style.opacity = '0';
          setTimeout(() => toast.remove(), 200);
        }, 3000);
      }

      // Payment Modal
      function setupPaymentModal() {
        const paymentModal = document.getElementById('payment-modal');
        const closePaymentBtn = document.getElementById('close-payment-modal');
        const cancelPaymentBtn = document.getElementById('cancel-payment');
        const paymentForm = document.getElementById('payment-form');
        const paymentMethodSelect = document.getElementById('payment-method');
        const cardDetails = document.getElementById('card-details');

        closePaymentBtn.addEventListener('click', closePaymentModal);
        cancelPaymentBtn.addEventListener('click', closePaymentModal);

        paymentMethodSelect.addEventListener('change', (e) => {
          if (e.target.value === 'Credit Card') {
            cardDetails.style.display = 'block';
          } else {
            cardDetails.style.display = 'none';
          }
        });

        paymentForm.addEventListener('submit', (e) => {
          e.preventDefault();
          
          const paymentMethod = document.getElementById('payment-method').value;
          const total = cart.reduce((sum, item) => sum + item.price, 0);
          const orderNumber = Math.floor(Math.random() * 9000) + 1000;
          
          // Create new order
          const newOrder = {
            id: orderNumber,
            items: [],
            total: total,
            status: 'pending',
            date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
            customer: currentUser.name,
            paymentMethod: paymentMethod
          };

          // Group cart items
          const groupedItems = {};
          cart.forEach(item => {
            if (!groupedItems[item.item]) {
              groupedItems[item.item] = { name: item.item, price: item.price, quantity: 1 };
            } else {
              groupedItems[item.item].quantity++;
            }
          });
          newOrder.items = Object.values(groupedItems);

          orders.unshift(newOrder);
          
          showToast(`Order #${orderNumber} placed successfully! Payment: ${paymentMethod}`);
          
          // Clear cart
          cart = [];
          saveCartToStorage();
          updateCartDisplay();
          closePaymentModal();
          
          // Add notification
          notifications.unshift({
            id: Date.now(),
            message: `Order #${orderNumber} has been placed and is being prepared`,
            read: false
          });
          updateNotificationBadge();
          
          // Update orders display if on orders page
          renderOrders();
        });

        paymentModal.addEventListener('click', (e) => {
          if (e.target.id === 'payment-modal') {
            closePaymentModal();
          }
        });
      }

      function openPaymentModal() {
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        document.getElementById('payment-total').textContent = '$' + total.toFixed(2);
        document.getElementById('payment-modal').classList.remove('hidden');
      }

      function closePaymentModal() {
        document.getElementById('payment-modal').classList.add('hidden');
        document.getElementById('payment-form').reset();
        document.getElementById('card-details').style.display = 'block';
      }

      // Orders Management
      function renderOrders(filterStatus = 'all') {
        const container = document.getElementById('orders-container');
        const ordersTitle = document.getElementById('orders-title');
        const orderFilters = document.getElementById('order-filters');

        // Show different views based on user role
        if (currentUser.role === 'staff' || currentUser.role === 'admin') {
          ordersTitle.textContent = 'All Orders';
          orderFilters.classList.remove('hidden');
          orderFilters.classList.add('flex');
        } else {
          ordersTitle.textContent = 'My Orders';
          orderFilters.classList.add('hidden');
        }

        let filteredOrders = orders;
        
        // Filter by customer for regular users
        if (currentUser.role === 'customer') {
          filteredOrders = orders.filter(order => order.customer === currentUser.name);
        }
        
        // Filter by status
        if (filterStatus !== 'all') {
          filteredOrders = filteredOrders.filter(order => order.status === filterStatus);
        }

        if (filteredOrders.length === 0) {
          container.innerHTML = '<p class="text-center text-gray-600 py-8">No orders found</p>';
          return;
        }

        container.innerHTML = filteredOrders.map(order => {
          const statusColors = {
            pending: 'bg-gray-200 text-gray-900',
            preparing: 'bg-warning text-gray-900',
            delivered: 'bg-success text-white'
          };

          const canUpdateStatus = currentUser.role === 'staff' || currentUser.role === 'admin';

          return `
            <article class="bg-white rounded-lg border border-gray-200 p-6">
              <div class="flex items-start justify-between mb-4">
                <div>
                  <h3 class="font-display font-semibold text-xl text-gray-900 mb-2">
                    Order #${order.id}
                  </h3>
                  <p class="text-gray-600 text-sm">Placed on ${order.date}</p>
                  ${canUpdateStatus ? `<p class="text-gray-600 text-sm">Customer: ${order.customer}</p>` : ''}
                  <p class="text-gray-600 text-sm">Payment: ${order.paymentMethod}</p>
                </div>
                <div class="flex flex-col gap-2 items-end">
                  <span class="px-4 py-2 rounded-lg ${statusColors[order.status]} font-normal text-sm capitalize">
                    ${order.status}
                  </span>
                  ${canUpdateStatus ? `
                    <select class="update-order-status px-3 py-1 rounded-lg border border-gray-300 text-sm" data-order-id="${order.id}">
                      <option value="">Update Status</option>
                      <option value="pending">Pending</option>
                      <option value="preparing">Preparing</option>
                      <option value="delivered">Delivered</option>
                    </select>
                  ` : ''}
                </div>
              </div>
              <div class="border-t border-gray-200 pt-4 mb-4">
                <ul class="space-y-2 text-gray-700">
                  ${order.items.map(item => `<li>${item.name} x${item.quantity} - $${(item.price * item.quantity).toFixed(2)}</li>`).join('')}
                </ul>
              </div>
              <div class="flex items-center justify-between">
                <span class="font-semibold text-xl text-gray-900">$${order.total.toFixed(2)}</span>
                ${currentUser.role === 'customer' ? `
                  <button class="reorder-btn px-6 py-2 rounded-lg bg-secondary text-secondary-foreground font-normal hover:bg-[hsl(13,75%,62%)] transition-smooth focus-visible" data-order-id="${order.id}">
                    Reorder
                  </button>
                ` : ''}
              </div>
            </article>
          `;
        }).join('');

        // Setup reorder buttons
        document.querySelectorAll('.reorder-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const orderId = parseInt(btn.dataset.orderId);
            const order = orders.find(o => o.id === orderId);
            if (order) {
              order.items.forEach(item => {
                for (let i = 0; i < item.quantity; i++) {
                  cart.push({ item: item.name, price: item.price });
                }
              });
              saveCartToStorage();
              updateCartDisplay();
              showToast('Items added to cart!');
              document.querySelector('[data-section="menu"]').click();
            }
          });
        });

        // Setup status update dropdowns
        document.querySelectorAll('.update-order-status').forEach(select => {
          select.addEventListener('change', (e) => {
            const orderId = parseInt(e.target.dataset.orderId);
            const newStatus = e.target.value;
            if (newStatus) {
              const order = orders.find(o => o.id === orderId);
              if (order) {
                order.status = newStatus;
                showToast(`Order #${orderId} status updated to ${newStatus}`);
                renderOrders(document.querySelector('.order-filter-btn.bg-primary')?.dataset.status || 'all');
                
                // Add notification
                notifications.unshift({
                  id: Date.now(),
                  message: `Order #${orderId} status changed to ${newStatus}`,
                  read: false
                });
                updateNotificationBadge();
              }
            }
          });
        });
      }

      function setupOrderFilters() {
        document.querySelectorAll('.order-filter-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            document.querySelectorAll('.order-filter-btn').forEach(b => {
              b.classList.remove('bg-primary', 'text-primary-foreground');
              b.classList.add('bg-gray-100', 'text-gray-700');
            });
            btn.classList.add('bg-primary', 'text-primary-foreground');
            btn.classList.remove('bg-gray-100', 'text-gray-700');
            
            renderOrders(btn.dataset.status);
          });
        });
      }

      // Admin Panel
      function setupAdminTabs() {
        document.querySelectorAll('.admin-tab').forEach(tab => {
          tab.addEventListener('click', () => {
            const tabName = tab.dataset.tab;
            
            // Update tab styles
            document.querySelectorAll('.admin-tab').forEach(t => {
              t.classList.remove('text-primary', 'border-b-2', 'border-primary');
              t.classList.add('text-gray-600');
            });
            tab.classList.add('text-primary', 'border-b-2', 'border-primary');
            tab.classList.remove('text-gray-600');
            
            // Show/hide tab content
            document.querySelectorAll('.admin-tab-content').forEach(content => {
              content.classList.add('hidden');
            });
            document.getElementById(`admin-${tabName}-tab`).classList.remove('hidden');
          });
        });
      }

      function renderAdminTables() {
        renderMenuItemsTable();
        renderUsersTable();
      }

      function renderMenuItemsTable() {
        const tbody = document.getElementById('menu-items-table');
        tbody.innerHTML = menuItems.slice(0, 10).map((item, index) => `
          <tr>
            <td class="px-6 py-4 text-gray-900">${item.name}</td>
            <td class="px-6 py-4 text-gray-700 capitalize">${item.category}</td>
            <td class="px-6 py-4 text-gray-900">$${item.price.toFixed(2)}</td>
            <td class="px-6 py-4 text-gray-700">In Stock</td>
            <td class="px-6 py-4">
              <label class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" checked class="sr-only peer" />
                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-tertiary rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-tertiary"></div>
              </label>
            </td>
            <td class="px-6 py-4">
              <button class="edit-menu-item text-tertiary hover:text-[hsl(100,45%,40%)] font-normal transition-smooth mr-4" data-index="${index}">
                Edit
              </button>
              <button class="delete-menu-item text-primary hover:text-[hsl(13,75%,52%)] font-normal transition-smooth" data-index="${index}">
                Delete
              </button>
            </td>
          </tr>
        `).join('');

        // Setup edit/delete buttons
        document.querySelectorAll('.delete-menu-item').forEach(btn => {
          btn.addEventListener('click', () => {
            if (confirm('Are you sure you want to delete this item?')) {
              const index = parseInt(btn.dataset.index);
              menuItems.splice(index, 1);
              renderMenuItemsTable();
              renderMenuItems(currentCategory);
              showToast('Menu item deleted');
            }
          });
        });
      }

      function renderUsersTable() {
        const tbody = document.getElementById('users-table');
        tbody.innerHTML = users.map((user, index) => `
          <tr>
            <td class="px-6 py-4 text-gray-900">${user.name}</td>
            <td class="px-6 py-4 text-gray-700">${user.email}</td>
            <td class="px-6 py-4">
              <span class="px-3 py-1 rounded-lg ${user.role === 'admin' ? 'bg-primary' : user.role === 'staff' ? 'bg-tertiary' : 'bg-gray-200'} text-white text-sm capitalize">
                ${user.role}
              </span>
            </td>
            <td class="px-6 py-4">
              <span class="px-3 py-1 rounded-lg ${user.status === 'active' ? 'bg-success' : 'bg-gray-200'} text-white text-sm capitalize">
                ${user.status}
              </span>
            </td>
            <td class="px-6 py-4">
              <button class="edit-user text-tertiary hover:text-[hsl(100,45%,40%)] font-normal transition-smooth mr-4" data-index="${index}">
                Edit
              </button>
              <button class="delete-user text-primary hover:text-[hsl(13,75%,52%)] font-normal transition-smooth" data-index="${index}">
                ${user.status === 'active' ? 'Deactivate' : 'Activate'}
              </button>
            </td>
          </tr>
        `).join('');

        // Setup user management buttons
        document.querySelectorAll('.delete-user').forEach(btn => {
          btn.addEventListener('click', () => {
            const index = parseInt(btn.dataset.index);
            users[index].status = users[index].status === 'active' ? 'inactive' : 'active';
            renderUsersTable();
            showToast(`User ${users[index].status === 'active' ? 'activated' : 'deactivated'}`);
          });
        });
      }
    </script>

  </body>
</html>
